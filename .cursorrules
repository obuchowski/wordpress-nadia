Project overview
- Local WordPress served via Podman Compose at `/home/evgeni/projects/podman-compose.yml`.
- Services: WordPress (port 8085) + MySQL (port 3306); site files mounted from `/home/evgeni/projects-external/wordpress/site` to `/var/www/html` in the container.
- Goal: one-click static export (Simply Static plugin, free) and push to Cloudflare Pages via GitHub.

Key paths
- Repo root: `/home/evgeni/projects-external/wordpress`
- WordPress root (host): `/home/evgeni/projects-external/wordpress/site`
- Static output (Simply Static destination): `/home/evgeni/projects-external/wordpress/site/static-output` (inside container: `/var/www/html/static-output`)
- Deploy script (host): `/home/evgeni/projects-external/wordpress/scripts/deploy-to-github.sh`
- Trigger file written by plugin: `/home/evgeni/projects-external/wordpress/site/simple-deploy.trigger`
- Static site Git repo clone: `/home/evgeni/projects-external/wordpress/static-site-repo` (ignored here; connect to Cloudflare Pages)

Secrets and configuration
- Keep secrets in `.env` (gitignored). Example variables: MYSQL_ROOT_PASSWORD, MYSQL_DATABASE, MYSQL_USER, MYSQL_PASSWORD, WORDPRESS_DB_*, STATIC_OUTPUT_DIR, STATIC_REPO_PATH, GIT_REMOTE, GIT_BRANCH, CLOUDFLARE_* if needed.
- `.env.example` documents expected keys. Do not commit real secrets.
- Update Podman compose to reference `.env` if you move DB creds out of YAML.

Deployment workflow (MVP)
1) In WP Admin, activate Simply Static (free) and configure output to `/var/www/html/static-output`.
2) Click “Deploy Site” (Simple Deploy plugin). It triggers Simply Static generation and writes the trigger file.
3) Host runs `scripts/deploy-to-github.sh` (manually or via a file watcher) to rsync static output into `static-site-repo`, commit, and push to GitHub.
4) Cloudflare Pages is connected to that GitHub repo; build command empty, output dir `/`.

Simple Deploy plugin
- Lives at `site/wp-content/plugins/simple-deploy/simple-deploy.php`.
- Hooks Simply Static generation, writes trigger metadata, optionally runs a deploy script if `SIMPLE_DEPLOY_SCRIPT` points to an executable visible in the container.
- Admin page uses nonce + `manage_options` capability.

Watch/automation hint
- To automate after the trigger file is written, run a host-side watcher (e.g., `while inotifywait ... simple-deploy.trigger; do scripts/deploy-to-github.sh; done`) or execute the deploy script manually.

Do/Do-not
- Do not commit `.env`, `static-site-repo`, or generated `site/static-output`.
- Respect Podman container paths vs. host paths; deploy script runs on host, not inside the container.

